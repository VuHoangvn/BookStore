{{>header}}

<div class="page-header">
  <div class="search-menu">
    <input type="text" name="search" id="search" value="" oninput="onSearching()">
    <span class="glyphicon glyphicon-search"></span>
    <div class="search-result">

    </div>
  </div>
</div>
<div id="myCarousel" class="carousel slide" data-ride="carousel">
  <!-- Indicators -->
  <ol class="carousel-indicators">
    <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
    <li data-target="#myCarousel" data-slide-to="1"></li>
    <li data-target="#myCarousel" data-slide-to="2"></li>
  </ol>

  <!-- Wrapper for slides -->
  <div class="carousel-inner">
    <div class="item active">
      <img src="https://images.pexels.com/photos/5834/nature-grass-leaf-green.jpg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940" alt="">
    </div>

    <div class="item">
      <img src="https://images.pexels.com/photos/415071/pexels-photo-415071.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940" alt="">
    </div>

    <div class="item">
      <img src="https://images.pexels.com/photos/1516983/pexels-photo-1516983.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940" alt="">
    </div>
  </div>

  <!-- Left and right controls -->
  <a class="left carousel-control" href="#myCarousel" data-slide="prev">
    <span class="glyphicon glyphicon-chevron-left"></span>
    <span class="sr-only">Previous</span>
  </a>
  <a class="right carousel-control" href="#myCarousel" data-slide="next">
    <span class="glyphicon glyphicon-chevron-right"></span>
    <span class="sr-only">Next</span>
  </a>
</div>

<div class="container">
    <div class="page-header">
        <h1>Explore the world of book</h1>
    </div>
    <div class="row">
        <div class="col-sm-6 col-md-4 col-md-offset-4 col-sm-offset-3">
            <div id="success" class="alert alert-success" {{#if noMessages}}hidden{{/if}}>
                {{ successMsg }}
            </div>
        </div>
    </div>

    {{# each products }}
        <div class="page-header">
            <h1>New Books</h1>
        </div>
        <div class="row">
            {{# each this }}
                <div class="col-sm-6 col-md-4">
                    <div class="thumbnail">
                      <a href="detail/{{this._id}}">
                        <img src="{{ this.imagePath }}" alt="..." class="img-responsive">
                      </a>
                        <div class="caption">
                            <h3>{{ this.title }}</h3>
                            <p class="author">{{ this.author }}</p>
                            <div class="clearfix">
                                <div class="price pull-left">${{ this.price }}</div>
                                <a href="/add-to-cart/{{this._id}}" class="pull-right"><i class="fas fa-cart-plus fa-3x"></i></a>
                            </div>
                        </div>
                    </div>
                </div>
            {{/each}}
        </div>
    {{/each}}
</div>
<div class="page-header">

</div>

      
{{> footer}}

      <script type="text/javascript">
          let products = [];
          function onSearching() {
            document.getElementsByClassName("search-result")[0].innerHTML = "";
            const x = document.getElementById("search").value;

            console.log(x);
            {{# each products}}
              {{# each this}}
                if("{{this.title}}".indexOf(x) >= 0) {
                  $(".search-result").append("<p><a href=detail/{{this._id}}>{{this.title}}</a></p>")
                }
              {{/each}}
            {{/each}}
            if(!x)
              document.getElementsByClassName("search-result")[0].innerHTML = "";
          }

          console.log(products);
      </script>